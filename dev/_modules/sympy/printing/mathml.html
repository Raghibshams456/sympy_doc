
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>sympy.printing.mathml &#8212; SymPy 1.5.dev documentation</title>
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="https://live.sympy.org/static/live-core.css" />
    <link rel="stylesheet" type="text/css" href="https://live.sympy.org/static/live-autocomplete.css" />
    <link rel="stylesheet" type="text/css" href="https://live.sympy.org/static/live-sphinx.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://live.sympy.org/static/utilities.js"></script>
    <script type="text/javascript" src="https://live.sympy.org/static/external/classy.js"></script>
    <script type="text/javascript" src="https://live.sympy.org/static/live-core.js"></script>
    <script type="text/javascript" src="https://live.sympy.org/static/live-autocomplete.js"></script>
    <script type="text/javascript" src="https://live.sympy.org/static/live-sphinx.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML-full"></script>
    
    <link rel="shortcut icon" href="../../../_static/sympy-notailtext-favicon.ico"/>
    <link href="https://docs.sympy.org/latest/_modules/sympy/printing/mathml.html" rel="canonical" />
    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">SymPy 1.5.dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sympy.printing.mathml</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A MathML printer.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">division</span>

<span class="kn">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="n">sympify</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">Mul</span>
<span class="kn">from</span> <span class="nn">sympy.core.compatibility</span> <span class="k">import</span> <span class="nb">range</span><span class="p">,</span> <span class="n">string_types</span><span class="p">,</span> <span class="n">default_sort_key</span>
<span class="kn">from</span> <span class="nn">sympy.core.function</span> <span class="k">import</span> <span class="n">_coeff_isneg</span>
<span class="kn">from</span> <span class="nn">sympy.printing.conventions</span> <span class="k">import</span> <span class="n">split_super_sub</span><span class="p">,</span> <span class="n">requires_partial</span>
<span class="kn">from</span> <span class="nn">sympy.printing.precedence</span> <span class="k">import</span> <span class="n">precedence_traditional</span><span class="p">,</span> <span class="n">PRECEDENCE</span>
<span class="kn">from</span> <span class="nn">sympy.printing.pretty.pretty_symbology</span> <span class="k">import</span> <span class="n">greek_unicode</span>
<span class="kn">from</span> <span class="nn">sympy.printing.printer</span> <span class="k">import</span> <span class="n">Printer</span>

<span class="kn">import</span> <span class="nn">mpmath.libmp</span> <span class="k">as</span> <span class="nn">mlib</span>
<span class="kn">from</span> <span class="nn">mpmath.libmp</span> <span class="k">import</span> <span class="n">prec_to_dps</span>


<div class="viewcode-block" id="MathMLPrinterBase"><a class="viewcode-back" href="../../../modules/printing.html#sympy.printing.mathml.MathMLPrinterBase">[docs]</a><span class="k">class</span> <span class="nc">MathMLPrinterBase</span><span class="p">(</span><span class="n">Printer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Contains common code required for MathMLContentPrinter and</span>
<span class="sd">    MathMLPresentationPrinter.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_default_settings</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;order&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fold_frac_powers&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;fold_func_brackets&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;fold_short_frac&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;inv_trig_style&quot;</span><span class="p">:</span> <span class="s2">&quot;abbreviated&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ln_notation&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;long_frac_ratio&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;mat_delim&quot;</span><span class="p">:</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mat_symbol_style&quot;</span><span class="p">:</span> <span class="s2">&quot;plain&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mul_symbol&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;root_notation&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;symbol_names&quot;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s2">&quot;mul_symbol_mathml_numbers&quot;</span><span class="p">:</span> <span class="s1">&#39;&amp;#xB7;&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">Printer</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">xml.dom.minidom</span> <span class="k">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">Text</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>

        <span class="c1"># Workaround to allow strings to remain unescaped</span>
        <span class="c1"># Based on</span>
        <span class="c1"># https://stackoverflow.com/questions/38015864/python-xml-dom-minidom-\</span>
        <span class="c1">#                              please-dont-escape-my-strings/38041194</span>
        <span class="k">class</span> <span class="nc">RawText</span><span class="p">(</span><span class="n">Text</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">writexml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">writer</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">addindent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">newl</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;</span><span class="si">{}{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">newl</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">createRawTextNode</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">RawText</span><span class="p">()</span>
            <span class="n">r</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
            <span class="n">r</span><span class="o">.</span><span class="n">ownerDocument</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span>
            <span class="k">return</span> <span class="n">r</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span> <span class="o">=</span> <span class="n">createRawTextNode</span>

    <span class="k">def</span> <span class="nf">doprint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the expression as MathML.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mathML</span> <span class="o">=</span> <span class="n">Printer</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">)</span>
        <span class="n">unistr</span> <span class="o">=</span> <span class="n">mathML</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span>
        <span class="n">xmlbstr</span> <span class="o">=</span> <span class="n">unistr</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;xmlcharrefreplace&#39;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">xmlbstr</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">apply_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Applying the patch of xml.dom.minidom bug</span>
        <span class="c1"># Date: 2011-11-18</span>
        <span class="c1"># Description: http://ronrothman.com/public/leftbraned/xml-dom-minidom\</span>
        <span class="c1">#                   -toprettyxml-and-silly-whitespace/#best-solution</span>
        <span class="c1"># Issue: http://bugs.python.org/issue4147</span>
        <span class="c1"># Patch: http://hg.python.org/cpython/rev/7262f8f276ff/</span>

        <span class="kn">from</span> <span class="nn">xml.dom.minidom</span> <span class="k">import</span> <span class="n">Element</span><span class="p">,</span> <span class="n">Text</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">_write_data</span>

        <span class="k">def</span> <span class="nf">writexml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">writer</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">addindent</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">newl</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="c1"># indent = current indentation</span>
            <span class="c1"># addindent = indentation to add to higher levels</span>
            <span class="c1"># newl = newline string</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">indent</span> <span class="o">+</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagName</span><span class="p">)</span>

            <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attributes</span><span class="p">()</span>
            <span class="n">a_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">a_names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">a_name</span> <span class="ow">in</span> <span class="n">a_names</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot; </span><span class="si">%s</span><span class="s2">=</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">a_name</span><span class="p">)</span>
                <span class="n">_write_data</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">attrs</span><span class="p">[</span><span class="n">a_name</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">Node</span><span class="o">.</span><span class="n">TEXT_NODE</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">writexml</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">newl</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
                        <span class="n">node</span><span class="o">.</span><span class="n">writexml</span><span class="p">(</span>
                            <span class="n">writer</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">addindent</span><span class="p">,</span> <span class="n">addindent</span><span class="p">,</span> <span class="n">newl</span><span class="p">)</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">indent</span><span class="p">)</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;/</span><span class="si">%s</span><span class="s2">&gt;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tagName</span><span class="p">,</span> <span class="n">newl</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/&gt;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">newl</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Element_writexml_old</span> <span class="o">=</span> <span class="n">Element</span><span class="o">.</span><span class="n">writexml</span>
        <span class="n">Element</span><span class="o">.</span><span class="n">writexml</span> <span class="o">=</span> <span class="n">writexml</span>

        <span class="k">def</span> <span class="nf">writexml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">writer</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">addindent</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">newl</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="n">_write_data</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">newl</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Text_writexml_old</span> <span class="o">=</span> <span class="n">Text</span><span class="o">.</span><span class="n">writexml</span>
        <span class="n">Text</span><span class="o">.</span><span class="n">writexml</span> <span class="o">=</span> <span class="n">writexml</span>

    <span class="k">def</span> <span class="nf">restore_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">xml.dom.minidom</span> <span class="k">import</span> <span class="n">Element</span><span class="p">,</span> <span class="n">Text</span>
        <span class="n">Element</span><span class="o">.</span><span class="n">writexml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Element_writexml_old</span>
        <span class="n">Text</span><span class="o">.</span><span class="n">writexml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Text_writexml_old</span></div>


<div class="viewcode-block" id="MathMLContentPrinter"><a class="viewcode-back" href="../../../modules/printing.html#sympy.printing.mathml.MathMLContentPrinter">[docs]</a><span class="k">class</span> <span class="nc">MathMLContentPrinter</span><span class="p">(</span><span class="n">MathMLPrinterBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Prints an expression to the Content MathML markup language.</span>

<span class="sd">    References: https://www.w3.org/TR/MathML2/chapter4.html</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">printmethod</span> <span class="o">=</span> <span class="s2">&quot;_mathml_content&quot;</span>

<div class="viewcode-block" id="MathMLContentPrinter.mathml_tag"><a class="viewcode-back" href="../../../modules/printing.html#sympy.printing.mathml.MathMLContentPrinter.mathml_tag">[docs]</a>    <span class="k">def</span> <span class="nf">mathml_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the MathML tag for an expression.&quot;&quot;&quot;</span>
        <span class="n">translate</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;Add&#39;</span><span class="p">:</span> <span class="s1">&#39;plus&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Mul&#39;</span><span class="p">:</span> <span class="s1">&#39;times&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Derivative&#39;</span><span class="p">:</span> <span class="s1">&#39;diff&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Number&#39;</span><span class="p">:</span> <span class="s1">&#39;cn&#39;</span><span class="p">,</span>
            <span class="s1">&#39;int&#39;</span><span class="p">:</span> <span class="s1">&#39;cn&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Pow&#39;</span><span class="p">:</span> <span class="s1">&#39;power&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Max&#39;</span><span class="p">:</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Min&#39;</span><span class="p">:</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Abs&#39;</span><span class="p">:</span> <span class="s1">&#39;abs&#39;</span><span class="p">,</span>
            <span class="s1">&#39;And&#39;</span><span class="p">:</span> <span class="s1">&#39;and&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Or&#39;</span><span class="p">:</span> <span class="s1">&#39;or&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Xor&#39;</span><span class="p">:</span> <span class="s1">&#39;xor&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Not&#39;</span><span class="p">:</span> <span class="s1">&#39;not&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Implies&#39;</span><span class="p">:</span> <span class="s1">&#39;implies&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ci&#39;</span><span class="p">,</span>
            <span class="s1">&#39;MatrixSymbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ci&#39;</span><span class="p">,</span>
            <span class="s1">&#39;RandomSymbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ci&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Integral&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Sum&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sin&#39;</span><span class="p">:</span> <span class="s1">&#39;sin&#39;</span><span class="p">,</span>
            <span class="s1">&#39;cos&#39;</span><span class="p">:</span> <span class="s1">&#39;cos&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tan&#39;</span><span class="p">:</span> <span class="s1">&#39;tan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;cot&#39;</span><span class="p">:</span> <span class="s1">&#39;cot&#39;</span><span class="p">,</span>
            <span class="s1">&#39;csc&#39;</span><span class="p">:</span> <span class="s1">&#39;csc&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sec&#39;</span><span class="p">:</span> <span class="s1">&#39;sec&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sinh&#39;</span><span class="p">:</span> <span class="s1">&#39;sinh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;cosh&#39;</span><span class="p">:</span> <span class="s1">&#39;cosh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tanh&#39;</span><span class="p">:</span> <span class="s1">&#39;tanh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coth&#39;</span><span class="p">:</span> <span class="s1">&#39;coth&#39;</span><span class="p">,</span>
            <span class="s1">&#39;csch&#39;</span><span class="p">:</span> <span class="s1">&#39;csch&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sech&#39;</span><span class="p">:</span> <span class="s1">&#39;sech&#39;</span><span class="p">,</span>
            <span class="s1">&#39;asin&#39;</span><span class="p">:</span> <span class="s1">&#39;arcsin&#39;</span><span class="p">,</span>
            <span class="s1">&#39;asinh&#39;</span><span class="p">:</span> <span class="s1">&#39;arcsinh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acos&#39;</span><span class="p">:</span> <span class="s1">&#39;arccos&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acosh&#39;</span><span class="p">:</span> <span class="s1">&#39;arccosh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;atan&#39;</span><span class="p">:</span> <span class="s1">&#39;arctan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;atanh&#39;</span><span class="p">:</span> <span class="s1">&#39;arctanh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;atan2&#39;</span><span class="p">:</span> <span class="s1">&#39;arctan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acot&#39;</span><span class="p">:</span> <span class="s1">&#39;arccot&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acoth&#39;</span><span class="p">:</span> <span class="s1">&#39;arccoth&#39;</span><span class="p">,</span>
            <span class="s1">&#39;asec&#39;</span><span class="p">:</span> <span class="s1">&#39;arcsec&#39;</span><span class="p">,</span>
            <span class="s1">&#39;asech&#39;</span><span class="p">:</span> <span class="s1">&#39;arcsech&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acsc&#39;</span><span class="p">:</span> <span class="s1">&#39;arccsc&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acsch&#39;</span><span class="p">:</span> <span class="s1">&#39;arccsch&#39;</span><span class="p">,</span>
            <span class="s1">&#39;log&#39;</span><span class="p">:</span> <span class="s1">&#39;ln&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Equality&#39;</span><span class="p">:</span> <span class="s1">&#39;eq&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Unequality&#39;</span><span class="p">:</span> <span class="s1">&#39;neq&#39;</span><span class="p">,</span>
            <span class="s1">&#39;GreaterThan&#39;</span><span class="p">:</span> <span class="s1">&#39;geq&#39;</span><span class="p">,</span>
            <span class="s1">&#39;LessThan&#39;</span><span class="p">:</span> <span class="s1">&#39;leq&#39;</span><span class="p">,</span>
            <span class="s1">&#39;StrictGreaterThan&#39;</span><span class="p">:</span> <span class="s1">&#39;gt&#39;</span><span class="p">,</span>
            <span class="s1">&#39;StrictLessThan&#39;</span><span class="p">:</span> <span class="s1">&#39;lt&#39;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">translate</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">translate</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
        <span class="c1"># Not found in the MRO set</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">return</span> <span class="n">n</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_print_Mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">_coeff_isneg</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;minus&#39;</span><span class="p">))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print_Mul</span><span class="p">(</span><span class="o">-</span><span class="n">expr</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">x</span>

        <span class="kn">from</span> <span class="nn">sympy.simplify</span> <span class="k">import</span> <span class="n">fraction</span>
        <span class="n">numer</span><span class="p">,</span> <span class="n">denom</span> <span class="o">=</span> <span class="n">fraction</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">denom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">S</span><span class="o">.</span><span class="n">One</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;divide&#39;</span><span class="p">))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">numer</span><span class="p">))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">denom</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">x</span>

        <span class="n">coeff</span><span class="p">,</span> <span class="n">terms</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">as_coeff_mul</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">coeff</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">One</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># XXX since the negative coefficient has been handled, I don&#39;t</span>
            <span class="c1"># think a coeff of 1 can remain</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">!=</span> <span class="s1">&#39;old&#39;</span><span class="p">:</span>
            <span class="n">terms</span> <span class="o">=</span> <span class="n">Mul</span><span class="o">.</span><span class="n">_from_args</span><span class="p">(</span><span class="n">terms</span><span class="p">)</span><span class="o">.</span><span class="n">as_ordered_factors</span><span class="p">()</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;times&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">coeff</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">coeff</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">term</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_as_ordered_terms</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
        <span class="n">lastProcessed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">plusNodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="n">_coeff_isneg</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
                <span class="c1"># use minus</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;minus&#39;</span><span class="p">))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">lastProcessed</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="o">-</span><span class="n">arg</span><span class="p">))</span>
                <span class="c1"># invert expression since this is now minused</span>
                <span class="n">lastProcessed</span> <span class="o">=</span> <span class="n">x</span>
                <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">plusNodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lastProcessed</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plusNodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lastProcessed</span><span class="p">)</span>
                <span class="n">lastProcessed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">plusNodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plusNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lastProcessed</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;plus&#39;</span><span class="p">))</span>
        <span class="k">while</span> <span class="n">plusNodes</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">plusNodes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_MatrixBase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;matrix&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">rows</span><span class="p">):</span>
            <span class="n">x_r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;matrixrow&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">cols</span><span class="p">):</span>
                <span class="n">x_r</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x_r</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Rational</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">q</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># don&#39;t divide</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;cn&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">p</span><span class="p">)))</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;divide&#39;</span><span class="p">))</span>
        <span class="c1"># numerator</span>
        <span class="n">xnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;cn&#39;</span><span class="p">)</span>
        <span class="n">xnum</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">p</span><span class="p">)))</span>
        <span class="c1"># denominator</span>
        <span class="n">xdenom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;cn&#39;</span><span class="p">)</span>
        <span class="n">xdenom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">q</span><span class="p">)))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">xnum</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">xdenom</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>

        <span class="n">x_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;bvar&#39;</span><span class="p">)</span>
        <span class="n">x_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;lowlimit&#39;</span><span class="p">)</span>
        <span class="n">x_1</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">x_2</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>

        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x_1</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x_2</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_ImaginaryUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;imaginaryi&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_EulerGamma</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;eulergamma&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_GoldenRatio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;We use unicode #x3c6 for Greek letter phi as defined here</span>
<span class="sd">        http://www.w3.org/2003/entities/2007doc/isogrk1.html&quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;cn&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\N{GREEK SMALL LETTER PHI}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Exp1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;exponentiale&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Pi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;pi&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Infinity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;infinity&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_NaN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;notanumber&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_EmptySet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;emptyset&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_BooleanTrue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;true&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_BooleanFalse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;false&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_NegativeInfinity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;minus&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;infinity&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Integral</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">lime_recur</span><span class="p">(</span><span class="n">limits</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
            <span class="n">bvar_elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;bvar&#39;</span><span class="p">)</span>
            <span class="n">bvar_elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">bvar_elem</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">low_elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;lowlimit&#39;</span><span class="p">)</span>
                <span class="n">low_elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">low_elem</span><span class="p">)</span>
                <span class="n">up_elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;uplimit&#39;</span><span class="p">)</span>
                <span class="n">up_elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">up_elem</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">up_elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;uplimit&#39;</span><span class="p">)</span>
                <span class="n">up_elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">up_elem</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">limits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">function</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">lime_recur</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
            <span class="k">return</span> <span class="n">x</span>

        <span class="n">limits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">limits</span><span class="p">)</span>
        <span class="n">limits</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">lime_recur</span><span class="p">(</span><span class="n">limits</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="c1"># Printer can be shared because Sum and Integral have the</span>
        <span class="c1"># same internal representation.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_Integral</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sym</span><span class="p">):</span>
        <span class="n">ci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">sym</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mml:mrow&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mml:mo&#39;</span><span class="p">)</span>
                        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
                        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                    <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mml:mi&#39;</span><span class="p">)</span>
                    <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">mrow</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mml:mi&#39;</span><span class="p">)</span>
                <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">return</span> <span class="n">mi</span>

        <span class="c1"># translate name, supers and subs to unicode characters</span>
        <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">greek_unicode</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">greek_unicode</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">s</span>

        <span class="n">name</span><span class="p">,</span> <span class="n">supers</span><span class="p">,</span> <span class="n">subs</span> <span class="o">=</span> <span class="n">split_super_sub</span><span class="p">(</span><span class="n">sym</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">supers</span> <span class="o">=</span> <span class="p">[</span><span class="n">translate</span><span class="p">(</span><span class="n">sup</span><span class="p">)</span> <span class="k">for</span> <span class="n">sup</span> <span class="ow">in</span> <span class="n">supers</span><span class="p">]</span>
        <span class="n">subs</span> <span class="o">=</span> <span class="p">[</span><span class="n">translate</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">]</span>

        <span class="n">mname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mml:mi&#39;</span><span class="p">)</span>
        <span class="n">mname</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">supers</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">subs</span><span class="p">:</span>
                <span class="n">ci</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mml:msub&#39;</span><span class="p">)</span>
                <span class="n">msub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mname</span><span class="p">)</span>
                <span class="n">msub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">subs</span><span class="p">))</span>
                <span class="n">ci</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">msub</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">subs</span><span class="p">:</span>
                <span class="n">msup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mml:msup&#39;</span><span class="p">)</span>
                <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mname</span><span class="p">)</span>
                <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">supers</span><span class="p">))</span>
                <span class="n">ci</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">msup</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msubsup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mml:msubsup&#39;</span><span class="p">)</span>
                <span class="n">msubsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mname</span><span class="p">)</span>
                <span class="n">msubsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">subs</span><span class="p">))</span>
                <span class="n">msubsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">supers</span><span class="p">))</span>
                <span class="n">ci</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">msubsup</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ci</span>

    <span class="n">_print_MatrixSymbol</span> <span class="o">=</span> <span class="n">_print_Symbol</span>
    <span class="n">_print_RandomSymbol</span> <span class="o">=</span> <span class="n">_print_Symbol</span>

    <span class="k">def</span> <span class="nf">_print_Pow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="c1"># Here we use root instead of power if the exponent is the reciprocal</span>
        <span class="c1"># of an integer</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s1">&#39;root_notation&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">is_Rational</span>
                <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">q</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">xmldeg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;degree&#39;</span><span class="p">)</span>
                <span class="n">xmlci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;ci&#39;</span><span class="p">)</span>
                <span class="n">xmlci</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">q</span><span class="p">)))</span>
                <span class="n">xmldeg</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">xmlci</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">xmldeg</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">x</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">x_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x_1</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Derivative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">diff_symbol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">requires_partial</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
            <span class="n">diff_symbol</span> <span class="o">=</span> <span class="s1">&#39;partialdiff&#39;</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="n">diff_symbol</span><span class="p">))</span>
        <span class="n">x_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;bvar&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">sym</span><span class="p">,</span> <span class="n">times</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">variable_count</span><span class="p">):</span>
            <span class="n">x_1</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">sym</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">times</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">degree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;degree&#39;</span><span class="p">)</span>
                <span class="n">degree</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">sympify</span><span class="p">(</span><span class="n">times</span><span class="p">)))</span>
                <span class="n">x_1</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">degree</span><span class="p">)</span>

        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x_1</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">expr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;apply&quot;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Basic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_AssocOp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">x_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x_1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Relational</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;apply&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">lhs</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">rhs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;MathML reference for the &lt;list&gt; element:</span>
<span class="sd">        http://www.w3.org/TR/MathML2/chapter4.html#contm.list&quot;&quot;&quot;</span>
        <span class="n">dom_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
            <span class="n">dom_element</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">dom_element</span>

    <span class="k">def</span> <span class="nf">_print_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">dom_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="n">dom_element</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">dom_element</span>

    <span class="n">_print_Implies</span> <span class="o">=</span> <span class="n">_print_AssocOp</span>
    <span class="n">_print_Not</span> <span class="o">=</span> <span class="n">_print_AssocOp</span>
    <span class="n">_print_Xor</span> <span class="o">=</span> <span class="n">_print_AssocOp</span></div>


<div class="viewcode-block" id="MathMLPresentationPrinter"><a class="viewcode-back" href="../../../modules/printing.html#sympy.printing.mathml.MathMLPresentationPrinter">[docs]</a><span class="k">class</span> <span class="nc">MathMLPresentationPrinter</span><span class="p">(</span><span class="n">MathMLPrinterBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Prints an expression to the Presentation MathML markup language.</span>

<span class="sd">    References: https://www.w3.org/TR/MathML2/chapter3.html</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">printmethod</span> <span class="o">=</span> <span class="s2">&quot;_mathml_presentation&quot;</span>

<div class="viewcode-block" id="MathMLPresentationPrinter.mathml_tag"><a class="viewcode-back" href="../../../modules/printing.html#sympy.printing.mathml.MathMLPresentationPrinter.mathml_tag">[docs]</a>    <span class="k">def</span> <span class="nf">mathml_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the MathML tag for an expression.&quot;&quot;&quot;</span>
        <span class="n">translate</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;Number&#39;</span><span class="p">:</span> <span class="s1">&#39;mn&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Limit&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x2192;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Derivative&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;dd;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;int&#39;</span><span class="p">:</span> <span class="s1">&#39;mn&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;mi&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Integral&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;int;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Sum&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x2211;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sin&#39;</span><span class="p">:</span> <span class="s1">&#39;sin&#39;</span><span class="p">,</span>
            <span class="s1">&#39;cos&#39;</span><span class="p">:</span> <span class="s1">&#39;cos&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tan&#39;</span><span class="p">:</span> <span class="s1">&#39;tan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;cot&#39;</span><span class="p">:</span> <span class="s1">&#39;cot&#39;</span><span class="p">,</span>
            <span class="s1">&#39;asin&#39;</span><span class="p">:</span> <span class="s1">&#39;arcsin&#39;</span><span class="p">,</span>
            <span class="s1">&#39;asinh&#39;</span><span class="p">:</span> <span class="s1">&#39;arcsinh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acos&#39;</span><span class="p">:</span> <span class="s1">&#39;arccos&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acosh&#39;</span><span class="p">:</span> <span class="s1">&#39;arccosh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;atan&#39;</span><span class="p">:</span> <span class="s1">&#39;arctan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;atanh&#39;</span><span class="p">:</span> <span class="s1">&#39;arctanh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;acot&#39;</span><span class="p">:</span> <span class="s1">&#39;arccot&#39;</span><span class="p">,</span>
            <span class="s1">&#39;atan2&#39;</span><span class="p">:</span> <span class="s1">&#39;arctan&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Equality&#39;</span><span class="p">:</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Unequality&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x2260;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;GreaterThan&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x2265;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;LessThan&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x2264;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;StrictGreaterThan&#39;</span><span class="p">:</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;StrictLessThan&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lerchphi&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x3A6;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;zeta&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x3B6;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;dirichlet_eta&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x3B7;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;elliptic_k&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x39A;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lowergamma&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x3B3;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;uppergamma&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x393;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x393;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;totient&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x3D5;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;reduced_totient&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x3BB;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;primenu&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x3BD;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;primeomega&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x3A9;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;fresnels&#39;</span><span class="p">:</span> <span class="s1">&#39;S&#39;</span><span class="p">,</span>
            <span class="s1">&#39;fresnelc&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span>
            <span class="s1">&#39;LambertW&#39;</span><span class="p">:</span> <span class="s1">&#39;W&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Heaviside&#39;</span><span class="p">:</span> <span class="s1">&#39;&amp;#x398;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;BooleanTrue&#39;</span><span class="p">:</span> <span class="s1">&#39;True&#39;</span><span class="p">,</span>
            <span class="s1">&#39;BooleanFalse&#39;</span><span class="p">:</span> <span class="s1">&#39;False&#39;</span><span class="p">,</span>
            <span class="s1">&#39;NoneType&#39;</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span>
            <span class="s1">&#39;mathieus&#39;</span><span class="p">:</span> <span class="s1">&#39;S&#39;</span><span class="p">,</span>
            <span class="s1">&#39;mathieuc&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span>
            <span class="s1">&#39;mathieusprime&#39;</span><span class="p">:</span> <span class="s1">&#39;S&amp;#x2032;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;mathieucprime&#39;</span><span class="p">:</span> <span class="s1">&#39;C&amp;#x2032;&#39;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">def</span> <span class="nf">mul_symbol_selection</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mul_symbol&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mul_symbol&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;None&#39;</span><span class="p">):</span>
                <span class="k">return</span> <span class="s1">&#39;&amp;InvisibleTimes;&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mul_symbol&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;times&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;&amp;#xD7;&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mul_symbol&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;dot&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;&amp;#xB7;&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mul_symbol&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ldot&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;&amp;#x2024;&#39;</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mul_symbol&quot;</span><span class="p">],</span> <span class="n">string_types</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mul_symbol&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">translate</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">translate</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
        <span class="c1"># Not found in the MRO set</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;Mul&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mul_symbol_selection</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">return</span> <span class="n">n</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">parenthesize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">prec_val</span> <span class="o">=</span> <span class="n">precedence_traditional</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">prec_val</span> <span class="o">&lt;</span> <span class="n">level</span><span class="p">)</span> <span class="ow">or</span> <span class="p">((</span><span class="ow">not</span> <span class="n">strict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">prec_val</span> <span class="o">&lt;=</span> <span class="n">level</span><span class="p">):</span>
            <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">brac</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">mrow</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">sympy.simplify</span> <span class="k">import</span> <span class="n">fraction</span>
            <span class="n">numer</span><span class="p">,</span> <span class="n">denom</span> <span class="o">=</span> <span class="n">fraction</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">denom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">S</span><span class="o">.</span><span class="n">One</span><span class="p">:</span>
                <span class="n">frac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfrac&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;fold_short_frac&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">:</span>
                    <span class="n">frac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;bevelled&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span>
                <span class="n">xnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">numer</span><span class="p">)</span>
                <span class="n">xden</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">denom</span><span class="p">)</span>
                <span class="n">frac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">xnum</span><span class="p">)</span>
                <span class="n">frac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">xden</span><span class="p">)</span>
                <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">frac</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">mrow</span>

            <span class="n">coeff</span><span class="p">,</span> <span class="n">terms</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">as_coeff_mul</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">coeff</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">One</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">return</span> <span class="n">mrow</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">!=</span> <span class="s1">&#39;old&#39;</span><span class="p">:</span>
                <span class="n">terms</span> <span class="o">=</span> <span class="n">Mul</span><span class="o">.</span><span class="n">_from_args</span><span class="p">(</span><span class="n">terms</span><span class="p">)</span><span class="o">.</span><span class="n">as_ordered_factors</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">coeff</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">expr</span><span class="p">)))</span>
                <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span>
                <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">term</span> <span class="o">==</span> <span class="n">terms</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                    <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">expr</span><span class="p">)))</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">mrow</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_coeff_isneg</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">mrow</span> <span class="o">=</span> <span class="n">multiply</span><span class="p">(</span><span class="o">-</span><span class="n">expr</span><span class="p">,</span> <span class="n">mrow</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mrow</span> <span class="o">=</span> <span class="n">multiply</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">mrow</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_as_ordered_terms</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="n">_coeff_isneg</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
                <span class="c1"># use minus</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="o">-</span><span class="n">arg</span><span class="p">)</span>
                <span class="c1"># invert expression since this is now minused</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">))</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_MatrixBase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mtable&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">rows</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mtr&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">cols</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mtd&#39;</span><span class="p">)</span>
                <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mat_delim&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">table</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;mat_delim&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;[&quot;</span><span class="p">:</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;]&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;[&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">brac</span>

    <span class="k">def</span> <span class="nf">_get_printed_Rational</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">folded</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">p</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="o">-</span><span class="n">e</span><span class="o">.</span><span class="n">p</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">p</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfrac&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">folded</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;fold_short_frac&quot;</span><span class="p">]:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;bevelled&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">q</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">p</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
            <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">mrow</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Rational</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">q</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># don&#39;t divide</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">p</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_printed_Rational</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;fold_short_frac&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_print_Limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">munder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;munder&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;lim&#39;</span><span class="p">))</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">x_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">arrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">arrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="n">x_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x_1</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">arrow</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x_2</span><span class="p">)</span>

        <span class="n">munder</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">munder</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">munder</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_ImaginaryUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;ImaginaryI;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_GoldenRatio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x3A6;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Exp1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;ExponentialE;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Pi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;pi;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Infinity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x221E;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_NegativeInfinity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_Infinity</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_HBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x210F;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_EulerGamma</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x3B3;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_TribonacciConstant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;TribonacciConstant&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Dagger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">msup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2020;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">msup</span>

    <span class="k">def</span> <span class="nf">_print_Contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2208;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_HilbertSpace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x210B;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_ComplexSpace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">msup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x1D49E;&#39;</span><span class="p">))</span>
        <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">msup</span>

    <span class="k">def</span> <span class="nf">_print_FockSpace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2131;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>


    <span class="k">def</span> <span class="nf">_print_Integral</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">intsymbols</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;&amp;#x222B;&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;&amp;#x222C;&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;&amp;#x222D;&quot;</span><span class="p">}</span>

        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">limits</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lim</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">lim</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">limits</span><span class="p">):</span>
            <span class="c1"># Only up to three-integral signs exists</span>
            <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">intsymbols</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">limits</span><span class="p">)]))</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Either more than three or limits provided</span>
            <span class="k">for</span> <span class="n">lim</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">limits</span><span class="p">):</span>
                <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">intsymbols</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lim</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lim</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">msup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
                    <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                    <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">msup</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lim</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">msubsup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msubsup&#39;</span><span class="p">)</span>
                    <span class="n">msubsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                    <span class="n">msubsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">msubsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lim</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">msubsup</span><span class="p">)</span>
        <span class="c1"># print function</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">function</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s2">&quot;Mul&quot;</span><span class="p">],</span>
                                           <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="c1"># print integration variables</span>
        <span class="k">for</span> <span class="n">lim</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">limits</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">d</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;dd;&#39;</span><span class="p">))</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">limits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">limits</span><span class="p">)</span>
        <span class="n">subsup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;munderover&#39;</span><span class="p">)</span>
        <span class="n">low_elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">up_elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">summand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">summand</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>

        <span class="n">low</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">equal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">equal</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">))</span>
        <span class="n">low</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="n">low</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">equal</span><span class="p">)</span>
        <span class="n">low</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">low_elem</span><span class="p">)</span>

        <span class="n">subsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">summand</span><span class="p">)</span>
        <span class="n">subsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">low</span><span class="p">)</span>
        <span class="n">subsup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">up_elem</span><span class="p">)</span>

        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">subsup</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">function</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">function</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
            <span class="n">fence</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">function</span><span class="p">))</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">fence</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sym</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;plain&#39;</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
                        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                    <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
                    <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">mrow</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
                <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">return</span> <span class="n">mi</span>

        <span class="c1"># translate name, supers and subs to unicode characters</span>
        <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">greek_unicode</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">greek_unicode</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">s</span>

        <span class="n">name</span><span class="p">,</span> <span class="n">supers</span><span class="p">,</span> <span class="n">subs</span> <span class="o">=</span> <span class="n">split_super_sub</span><span class="p">(</span><span class="n">sym</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">supers</span> <span class="o">=</span> <span class="p">[</span><span class="n">translate</span><span class="p">(</span><span class="n">sup</span><span class="p">)</span> <span class="k">for</span> <span class="n">sup</span> <span class="ow">in</span> <span class="n">supers</span><span class="p">]</span>
        <span class="n">subs</span> <span class="o">=</span> <span class="p">[</span><span class="n">translate</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">]</span>

        <span class="n">mname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mname</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">supers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">mname</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mname</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">subs</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mname</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">supers</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msubsup&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mname</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">subs</span><span class="p">))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">supers</span><span class="p">))</span>
        <span class="c1"># Set bold font?</span>
        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s1">&#39;bold&#39;</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_MatrixSymbol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sym</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_Symbol</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span>
                                  <span class="n">style</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s1">&#39;mat_symbol_style&#39;</span><span class="p">])</span>

    <span class="n">_print_RandomSymbol</span> <span class="o">=</span> <span class="n">_print_Symbol</span>

    <span class="k">def</span> <span class="nf">_print_conjugate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">enc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;menclose&#39;</span><span class="p">)</span>
        <span class="n">enc</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;notation&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="n">enc</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">enc</span>

    <span class="k">def</span> <span class="nf">_print_operator_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">row</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s2">&quot;Func&quot;</span><span class="p">]))</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">op</span><span class="p">))</span>
        <span class="n">row</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">row</span>

    <span class="k">def</span> <span class="nf">_print_factorial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_operator_after</span><span class="p">(</span><span class="s1">&#39;!&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_print_factorial2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_operator_after</span><span class="p">(</span><span class="s1">&#39;!!&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_print_binomial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">frac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfrac&#39;</span><span class="p">)</span>
        <span class="n">frac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;linethickness&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">frac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">frac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">frac</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">brac</span>

    <span class="k">def</span> <span class="nf">_print_Pow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="c1"># Here we use root instead of power if the exponent is the</span>
        <span class="c1"># reciprocal of an integer</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">is_Rational</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">q</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s1">&#39;root_notation&#39;</span><span class="p">]):</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">q</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msqrt&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">q</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mroot&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">q</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">p</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">frac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfrac&#39;</span><span class="p">)</span>
                <span class="n">frac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">frac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">frac</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">x</span>

        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">is_Rational</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">q</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfrac&#39;</span><span class="p">)</span>
                <span class="n">top</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Pow&#39;</span><span class="p">]))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_printed_Rational</span><span class="p">(</span><span class="o">-</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="p">,</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s1">&#39;fold_frac_powers&#39;</span><span class="p">]))</span>
                <span class="n">top</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">top</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Pow&#39;</span><span class="p">]))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_printed_Rational</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="p">,</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s1">&#39;fold_frac_powers&#39;</span><span class="p">]))</span>
                <span class="k">return</span> <span class="n">x</span>

        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfrac&#39;</span><span class="p">)</span>
                <span class="n">top</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">exp</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">top</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
                    <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Pow&#39;</span><span class="p">]))</span>
                    <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="o">-</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="p">))</span>
                    <span class="n">top</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">top</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Pow&#39;</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">exp</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_AccumulationBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u27e9</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u27e8</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">min</span><span class="p">))</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">max</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">brac</span>

    <span class="k">def</span> <span class="nf">_print_Derivative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">requires_partial</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;&amp;#x2202;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="c1"># Determine denominator</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">dim</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Total diff dimension, for numerator</span>
        <span class="k">for</span> <span class="n">sym</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">variable_count</span><span class="p">):</span>
            <span class="n">dim</span> <span class="o">+=</span> <span class="n">num</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
                <span class="n">xx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                <span class="n">xx</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
            <span class="n">m</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">sym</span><span class="p">)</span>
            <span class="n">m</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="n">mnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dim</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
            <span class="n">xx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">xx</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">dim</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>

        <span class="n">mnum</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">frac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfrac&#39;</span><span class="p">)</span>
        <span class="n">frac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mnum</span><span class="p">)</span>
        <span class="n">frac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">frac</span><span class="p">)</span>

        <span class="c1"># Print function</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">expr</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s2">&quot;ln_notation&quot;</span><span class="p">]:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;ln&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="c1"># Based off of that in StrPrinter</span>
        <span class="n">dps</span> <span class="o">=</span> <span class="n">prec_to_dps</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">_prec</span><span class="p">)</span>
        <span class="n">str_real</span> <span class="o">=</span> <span class="n">mlib</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">_mpf_</span><span class="p">,</span> <span class="n">dps</span><span class="p">,</span> <span class="n">strip_zeros</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Must always have a mul symbol (as 2.5 10^{20} just looks odd)</span>
        <span class="c1"># thus we use the number separator</span>
        <span class="n">separator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">[</span><span class="s1">&#39;mul_symbol_mathml_numbers&#39;</span><span class="p">]</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;e&#39;</span> <span class="ow">in</span> <span class="n">str_real</span><span class="p">:</span>
            <span class="p">(</span><span class="n">mant</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span> <span class="o">=</span> <span class="n">str_real</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">exp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
                <span class="n">exp</span> <span class="o">=</span> <span class="n">exp</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

            <span class="n">mn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mn&#39;</span><span class="p">)</span>
            <span class="n">mn</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">mant</span><span class="p">))</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span>
            <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">separator</span><span class="p">))</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
            <span class="n">msup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
            <span class="n">mn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mn&#39;</span><span class="p">)</span>
            <span class="n">mn</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">))</span>
            <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span>
            <span class="n">mn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mn&#39;</span><span class="p">)</span>
            <span class="n">mn</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">exp</span><span class="p">))</span>
            <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">msup</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">mrow</span>
        <span class="k">elif</span> <span class="n">str_real</span> <span class="o">==</span> <span class="s2">&quot;+inf&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_Infinity</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">str_real</span> <span class="o">==</span> <span class="s2">&quot;-inf&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_NegativeInfinity</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mn&#39;</span><span class="p">)</span>
            <span class="n">mn</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">str_real</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">mn</span>

    <span class="k">def</span> <span class="nf">_print_polylog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>

        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;Li&#39;</span><span class="p">))</span>
        <span class="n">m</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Basic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Interval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">i</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
            <span class="c1"># Most often, this type of Interval is converted to a FiniteSet</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;}&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">start</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">right_open</span><span class="p">:</span>
                <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;]&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">left_open</span><span class="p">:</span>
                <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;[&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">start</span><span class="p">))</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>

        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Abs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">exp</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;|&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;|&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="n">_print_Determinant</span> <span class="o">=</span> <span class="n">_print_Abs</span>

    <span class="k">def</span> <span class="nf">_print_re_im</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;fraktur&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_re</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">exp</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_re_im</span><span class="p">(</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_print_im</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">exp</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_re_im</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_print_AssocOp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_SetOp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">symbol</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">symbol</span><span class="p">))</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_SetOp</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="s1">&#39;&amp;#x222A;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_SetOp</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="s1">&#39;&amp;#x2229;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_SetOp</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="s1">&#39;&amp;#x2216;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_SymmetricDifference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_SetOp</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="s1">&#39;&amp;#x2206;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_FiniteSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_set</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">items</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">default_sort_key</span><span class="p">)</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;}&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">brac</span>

    <span class="n">_print_frozenset</span> <span class="o">=</span> <span class="n">_print_set</span>

    <span class="k">def</span> <span class="nf">_print_LogOp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">symbol</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_Boolean</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_Not</span><span class="p">:</span>
            <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">symbol</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">is_Boolean</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">arg</span><span class="o">.</span><span class="n">is_Not</span><span class="p">:</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
                <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_BasisDependent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">sympy.vector</span> <span class="k">import</span> <span class="n">Vector</span>

        <span class="k">if</span> <span class="n">expr</span> <span class="o">==</span> <span class="n">expr</span><span class="o">.</span><span class="n">zero</span><span class="p">:</span>
            <span class="c1"># Not clear if this is ever called</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">zero</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">Vector</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">separate</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">expr</span><span class="p">)]</span>

        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">system</span><span class="p">,</span> <span class="n">vect</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="n">inneritems</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">vect</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
            <span class="n">inneritems</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="fm">__str__</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">inneritems</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span><span class="p">:</span> <span class="c1"># No + for first item</span>
                        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">))</span>
                        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">v</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                    <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span><span class="p">:</span> <span class="c1"># No + for first item</span>
                        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">))</span>
                        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                    <span class="n">mbrac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
                    <span class="n">mbrac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mbrac</span><span class="p">)</span>
                    <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
                    <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;InvisibleTimes;&#39;</span><span class="p">))</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
                    <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">mrow</span>


    <span class="k">def</span> <span class="nf">_print_And</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">default_sort_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_LogOp</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s1">&#39;&amp;#x2227;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Or</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">default_sort_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_LogOp</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s1">&#39;&amp;#x2228;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Xor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">default_sort_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_LogOp</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s1">&#39;&amp;#x22BB;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Implies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_LogOp</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="s1">&#39;&amp;#x21D2;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Equivalent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">default_sort_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_LogOp</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s1">&#39;&amp;#x21D4;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Not</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#xAC;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_Boolean</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">mi</span>

    <span class="n">_print_BooleanTrue</span> <span class="o">=</span> <span class="n">_print_bool</span>
    <span class="n">_print_BooleanFalse</span> <span class="o">=</span> <span class="n">_print_bool</span>

    <span class="k">def</span> <span class="nf">_print_NoneType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">mi</span>

    <span class="k">def</span> <span class="nf">_print_Range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">dots</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u2026</span><span class="s2">&quot;</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;}&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">is_infinite</span><span class="p">:</span>
            <span class="n">printset</span> <span class="o">=</span> <span class="n">dots</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="n">step</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">s</span><span class="o">.</span><span class="n">stop</span><span class="o">.</span><span class="n">is_infinite</span><span class="p">:</span>
            <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">printset</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="n">dots</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">printset</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="n">dots</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">printset</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">printset</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">el</span> <span class="o">==</span> <span class="n">dots</span><span class="p">:</span>
                <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
                <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">dots</span><span class="p">))</span>
                <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">el</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">brac</span>

    <span class="k">def</span> <span class="nf">_hprint_variadic_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">default_sort_key</span><span class="p">)</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">func</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">symbol</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="n">_print_Min</span> <span class="o">=</span> <span class="n">_print_Max</span> <span class="o">=</span> <span class="n">_hprint_variadic_function</span>

    <span class="k">def</span> <span class="nf">_print_exp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">msup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print_Exp1</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
        <span class="n">msup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">msup</span>

    <span class="k">def</span> <span class="nf">_print_Relational</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">lhs</span><span class="p">))</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">rhs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">dom_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mathml_tag</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="n">dom_element</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">dom_element</span>

    <span class="k">def</span> <span class="nf">_print_BaseScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">msub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">index</span><span class="p">,</span> <span class="n">system</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">_id</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">system</span><span class="o">.</span><span class="n">_variable_names</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
        <span class="n">msub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">system</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
        <span class="n">msub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msub</span>

    <span class="k">def</span> <span class="nf">_print_BaseVector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">msub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">index</span><span class="p">,</span> <span class="n">system</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">_id</span>
        <span class="n">mover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mover&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">system</span><span class="o">.</span><span class="n">_vector_names</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
        <span class="n">mover</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;^&#39;</span><span class="p">))</span>
        <span class="n">mover</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">msub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mover</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">system</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
        <span class="n">msub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msub</span>

    <span class="k">def</span> <span class="nf">_print_VectorZero</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mover&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>
        <span class="n">mover</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;^&#39;</span><span class="p">))</span>
        <span class="n">mover</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mover</span>

    <span class="k">def</span> <span class="nf">_print_Cross</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">vec1</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">_expr1</span>
        <span class="n">vec2</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">_expr2</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">vec1</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#xD7;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">vec2</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Curl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2207;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#xD7;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">_expr</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Divergence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2207;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#xB7;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">_expr</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">vec1</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">_expr1</span>
        <span class="n">vec2</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">_expr2</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">vec1</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#xB7;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">vec2</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Gradient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2207;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">_expr</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Laplacian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2206;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">_expr</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s1">&#39;Mul&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Integers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2124;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Complexes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2102;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Reals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x211D;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Naturals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2115;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Naturals0</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;mathvariant&#39;</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2115;&#39;</span><span class="p">))</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">Zero</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">sub</span>

    <span class="k">def</span> <span class="nf">_print_SingularityFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">shift</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">power</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">sup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u27e9</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u27e8</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">shift</span><span class="p">))</span>
        <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">power</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">sup</span>

    <span class="k">def</span> <span class="nf">_print_NaN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;NaN&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_number_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># Print name_arg[0] for one argument or name_arg[0](arg[1])</span>
        <span class="c1"># for more than one argument</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sub</span>
        <span class="c1"># TODO: copy-pasted from _print_Function: can we do better?</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_bernoulli</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_number_function</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span>

    <span class="n">_print_bell</span> <span class="o">=</span> <span class="n">_print_bernoulli</span>

    <span class="k">def</span> <span class="nf">_print_catalan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_number_function</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_euler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_number_function</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_fibonacci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_number_function</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_lucas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_number_function</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_stieltjes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_number_function</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;&amp;#x03B3;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_tribonacci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_number_function</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_ComplexInfinity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mover&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x221E;&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_EmptySet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2205;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_UniversalSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x1D54C;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Adjoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">sympy.matrices</span> <span class="k">import</span> <span class="n">MatrixSymbol</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">arg</span>
        <span class="n">sup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">MatrixSymbol</span><span class="p">):</span>
            <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
            <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2020;&#39;</span><span class="p">))</span>
        <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sup</span>

    <span class="k">def</span> <span class="nf">_print_Transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">sympy.matrices</span> <span class="k">import</span> <span class="n">MatrixSymbol</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">arg</span>
        <span class="n">sup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">MatrixSymbol</span><span class="p">):</span>
            <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
            <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">))</span>
        <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sup</span>

    <span class="k">def</span> <span class="nf">_print_Inverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">sympy.matrices</span> <span class="k">import</span> <span class="n">MatrixSymbol</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">arg</span>
        <span class="n">sup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">MatrixSymbol</span><span class="p">):</span>
            <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
            <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
        <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">sup</span>

    <span class="k">def</span> <span class="nf">_print_MatMul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="n">MatMul</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Mul</span><span class="p">):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_ordered_factors</span><span class="p">()</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">MatMul</span><span class="p">)</span> <span class="ow">and</span> <span class="n">_coeff_isneg</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">precedence_traditional</span><span class="p">(</span><span class="n">expr</span><span class="p">),</span>
                                            <span class="kc">False</span><span class="p">))</span>
            <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;InvisibleTimes;&#39;</span><span class="p">))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">precedence_traditional</span><span class="p">(</span><span class="n">expr</span><span class="p">),</span>
                                        <span class="kc">False</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_MatPow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">sympy.matrices</span> <span class="k">import</span> <span class="n">MatrixSymbol</span>
        <span class="n">base</span><span class="p">,</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">exp</span>
        <span class="n">sup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msup&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">MatrixSymbol</span><span class="p">):</span>
            <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">base</span><span class="p">))</span>
            <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">base</span><span class="p">))</span>
        <span class="n">sup</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">exp</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">sup</span>

    <span class="k">def</span> <span class="nf">_print_HadamardProduct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">precedence_traditional</span><span class="p">(</span><span class="n">expr</span><span class="p">),</span> <span class="kc">False</span><span class="p">))</span>
            <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
            <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x2218;&#39;</span><span class="p">))</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">precedence_traditional</span><span class="p">(</span><span class="n">expr</span><span class="p">),</span> <span class="kc">False</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_ZeroMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Z</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mn&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x1D7D8&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_OneMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Z</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mn&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x1D7D9&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Identity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">I</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x1D540;&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_floor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u230B</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u230A</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_ceiling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u2309</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u2308</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mrow</span>

    <span class="k">def</span> <span class="nf">_print_Lambda</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">mrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">symbols</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">symbols</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x21A6;&#39;</span><span class="p">))</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">mrow</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mrow</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_IndexedBase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_print_Indexed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">base</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">indices</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_MatrixElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parenthesize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">PRECEDENCE</span><span class="p">[</span><span class="s2">&quot;Atom&quot;</span><span class="p">],</span> <span class="n">strict</span> <span class="o">=</span> <span class="kc">True</span><span class="p">))</span>
        <span class="n">brac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;close&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">brac</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">indices</span><span class="p">:</span>
            <span class="n">brac</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">brac</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_elliptic_f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x1d5a5;&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;separators&quot;</span><span class="p">,</span> <span class="s2">&quot;|&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_elliptic_e</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x1d5a4;&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;separators&quot;</span><span class="p">,</span> <span class="s2">&quot;|&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_elliptic_pi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;&amp;#x1d6f1;&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mfenced&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">y</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;separators&quot;</span><span class="p">,</span> <span class="s2">&quot;|&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">y</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;separators&quot;</span><span class="p">,</span> <span class="s2">&quot;;|&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_Ei</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">mi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mi&#39;</span><span class="p">)</span>
        <span class="n">mi</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;Ei&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mi</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_expint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_jacobi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msubsup&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_gegenbauer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msubsup&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_chebyshevt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_chebyshevu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;U&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_legendre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_assoc_legendre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msubsup&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_laguerre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_assoc_laguerre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msubsup&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_print_hermite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mrow&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;msub&#39;</span><span class="p">)</span>
        <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;mo&#39;</span><span class="p">)</span>
        <span class="n">mo</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">x</span></div>


<div class="viewcode-block" id="mathml"><a class="viewcode-back" href="../../../modules/printing.html#sympy.printing.mathml.mathml">[docs]</a><span class="k">def</span> <span class="nf">mathml</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">printer</span><span class="o">=</span><span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the MathML representation of expr. If printer is presentation</span>
<span class="sd">    then prints Presentation MathML else prints content MathML.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">printer</span> <span class="o">==</span> <span class="s1">&#39;presentation&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">MathMLPresentationPrinter</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span><span class="o">.</span><span class="n">doprint</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">MathMLContentPrinter</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span><span class="o">.</span><span class="n">doprint</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span></div>


<div class="viewcode-block" id="print_mathml"><a class="viewcode-back" href="../../../modules/printing.html#sympy.printing.mathml.print_mathml">[docs]</a><span class="k">def</span> <span class="nf">print_mathml</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">printer</span><span class="o">=</span><span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prints a pretty representation of the MathML code for expr. If printer is</span>
<span class="sd">    presentation then prints Presentation MathML else prints content MathML.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; ##</span>
<span class="sd">    &gt;&gt;&gt; from sympy.printing.mathml import print_mathml</span>
<span class="sd">    &gt;&gt;&gt; from sympy.abc import x</span>
<span class="sd">    &gt;&gt;&gt; print_mathml(x+1) #doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">    &lt;apply&gt;</span>
<span class="sd">        &lt;plus/&gt;</span>
<span class="sd">        &lt;ci&gt;x&lt;/ci&gt;</span>
<span class="sd">        &lt;cn&gt;1&lt;/cn&gt;</span>
<span class="sd">    &lt;/apply&gt;</span>
<span class="sd">    &gt;&gt;&gt; print_mathml(x+1, printer=&#39;presentation&#39;)</span>
<span class="sd">    &lt;mrow&gt;</span>
<span class="sd">        &lt;mi&gt;x&lt;/mi&gt;</span>
<span class="sd">        &lt;mo&gt;+&lt;/mo&gt;</span>
<span class="sd">        &lt;mn&gt;1&lt;/mn&gt;</span>
<span class="sd">    &lt;/mrow&gt;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">printer</span> <span class="o">==</span> <span class="s1">&#39;presentation&#39;</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">MathMLPresentationPrinter</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">MathMLContentPrinter</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
    <span class="n">xml</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">sympify</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">apply_patch</span><span class="p">()</span>
    <span class="n">pretty_xml</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">()</span>
    <span class="n">s</span><span class="o">.</span><span class="n">restore_patch</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">pretty_xml</span><span class="p">)</span></div>


<span class="c1"># For backward compatibility</span>
<span class="n">MathMLPrinter</span> <span class="o">=</span> <span class="n">MathMLContentPrinter</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/sympylogo.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">SymPy 1.5.dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019 SymPy Development Team.
      Last updated on Aug 01, 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>